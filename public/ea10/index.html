<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>EA10 | Seeds 3D | Pascal Hürten</title>
	<link rel="stylesheet" href="../style.css">
	<link rel="stylesheet" href="../ea2/style.css">

	<script src="ext/gl-matrix.js"></script>
	<script src="ext/papaparse.min.js"></script>

	<!--NEW DIM-->
	<script src="ext/tsne.js"></script>

	<script src="GVT_Src_vertexData_sphere.js"></script>

	<!--NEW DIM-->
	<script src="DIM_Src_Data_tpl.js"></script>
	<script src="interactive-features.js"></script>
	<script src="grid-visualization.js"></script>
	<script src="DIM_Src_tpl.js"></script>

	<script type="x-shader/x-vertex" id="vertexshader">
		attribute vec3 aPosition;
		attribute vec3 aNormal;

		uniform mat4 uPMatrix;
		uniform mat4 uMVMatrix;
		uniform mat3 uNMatrix;

		varying vec3 vNormal;

		void main(){
			// Calculte vertex position in eye coordinates. 
			vec4 tPosition = uMVMatrix * vec4(aPosition, 1.0);
			// Calculate projektion.
			gl_Position = uPMatrix * tPosition;

			vec3 tNormal = normalize(uNMatrix * aNormal);
			tNormal = uNMatrix * aNormal;
			
			vNormal = tNormal;
		}
	</script>
	<script type="x-shader/x-fragment" id="fragmentshader">
		precision mediump float;

		varying vec3 vNormal;

		// Material.
		struct PhongMaterial {
			vec3 ka;
			vec3 kd;
			vec3 ks;
			float ke;
		};
		uniform PhongMaterial material;

		// Ambient light.
		uniform vec3 ambientLight;

		vec3 camLight(vec3 n) {

			vec3 ambient = material.ka * ambientLight;

			vec3 s = vec3(0,0,1);
			float sn = max( dot(s,n), 0.0);
			vec3 diffuse = material.kd * sn;

			return ambient + diffuse;
		}

		void main() {
			vec3 vNormal = normalize(vNormal);
			gl_FragColor = vec4(camLight(vNormal), 1.0);
		}
	</script>
</head>

<body onload="app.start()">
	<main>
		<nav class="breadcrumb" aria-label="Breadcrumb">
			<a href="../index.html">← Zurück zur Übersicht</a>
		</nav>

		<h1>EA10 - Seeds 3D Dimensionsreduktion - Pascal Hürten</h1>

		<section id="viewer" aria-labelledby="viewer-heading">
			<h2 id="viewer-heading">t-SNE Seeds Dataset Visualisierung</h2>

			<div id="canvas-wrap" style="position:relative; text-align:center; margin:20px 0;">
				<canvas id="canvas" width="700" height="700"
					style="border:1px solid #ccc; border-radius:4px; max-width:100%; height:auto; display:block;"></canvas>

				<!-- Legend overlay -->
				<div class="legend"
					style="position:absolute; top:12px; left:12px; background:#fff; border:1px solid #e6e6e6; padding:12px; border-radius:6px; max-width:250px;">
					<div><strong>Weizensorten:</strong></div>
					<div style="margin-top:8px; display:flex; flex-direction:column; gap:8px;">
						<div class="legend-item" style="display:flex; align-items:center; gap:8px;">
							<span class="legend-color"
								style="display:inline-block; width:15px; height:15px; background-color:rgb(0, 255, 0); border-radius:2px;"></span>
							<span>Kama (Klasse 1)</span>
						</div>
						<div class="legend-item" style="display:flex; align-items:center; gap:8px;">
							<span class="legend-color"
								style="display:inline-block; width:15px; height:15px; background-color:rgb(0, 0, 255); border-radius:2px;"></span>
							<span>Rosa (Klasse 2)</span>
						</div>
						<div class="legend-item" style="display:flex; align-items:center; gap:8px;">
							<span class="legend-color"
								style="display:inline-block; width:15px; height:15px; background-color:rgb(255, 255, 0); border-radius:2px;"></span>
							<span>Canadian (Klasse 3)</span>
						</div>
					</div>
				</div>

				<!-- Info panel overlay -->
				<div id="info-panel"
					style="position:absolute; bottom:12px; right:12px; background:#f5f9ff; border-left:4px solid #2196F3; padding:12px; border-radius:6px; display:none; max-width:280px; max-height:400px; overflow-y:auto; box-shadow:0 2px 8px rgba(0,0,0,0.15);">
					<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
						<strong>Selected Data Point</strong>
						<button onclick="app.clearSelection()"
							style="background:#ddd; border:none; padding:4px 8px; border-radius:3px; cursor:pointer; font-size:12px;">✕</button>
					</div>
					<div id="info-content" style="font-size:12px; font-family:monospace; line-height:1.5;"></div>
				</div>

				<!-- Info display -->
				<div id="info"
					style="position:absolute; top:12px; right:12px; background:#e7f3fe; border-left:4px solid #2196F3; padding:12px; border-radius:6px; font-size:13px; max-width:250px;">
					<div><strong>Dataset:</strong> Seeds</div>
					<div><strong>Original Dim:</strong> 7</div>
					<div><strong>Reduziert:</strong> 3D (t-SNE)</div>
					<div id="para" style="margin-top:8px; font-size:11px;"></div>
					<div id="step" style="font-size:11px;"></div>
					<div id="experiment" style="font-size:11px;"></div>
				</div>
			</div>

			<div
				style="margin-top:20px; margin-bottom: 20px; display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
				<button class="button" onclick="app.restart()" aria-label="Restart t-SNE"
					style="font-size:14px; padding:8px 12px;">Restart (R)</button>
				<button class="button" onclick="app.stepOnce()" aria-label="Single Step"
					style="font-size:14px; padding:8px 12px;">Step (T)</button>
				<button class="button" onclick="app.stepMultiple(10)" aria-label="Step 10 times"
					style="font-size:14px; padding:8px 12px;">Step ×10 (Shift+T)</button>
				<button class="button" onclick="app.downloadResults()" aria-label="Download Results"
					style="font-size:14px; padding:8px 12px;">Download (K)</button>
				<label style="display:flex; align-items:center; gap:6px; font-size:14px;">
					<input type="checkbox" id="showGrid" checked onchange="app.toggleGrid()" />
					Show Axes (G)
				</label>
			</div>

			<div id="hover-tooltip"
				style="position:fixed; background:#333; color:#fff; padding:8px 12px; border-radius:4px; font-size:12px; pointer-events:none; display:none; z-index:1000; max-width:200px; box-shadow:0 2px 8px rgba(0,0,0,0.3);">
			</div>

			<div id="key-help"
				style="margin:0 auto 20px; text-align:left; background:#fff; border:1px solid #e6e6e6; padding:12px; border-radius:6px; box-shadow:0 1px 2px rgba(0,0,0,0.04);">
				<div style="display:flex;justify-content:space-between;align-items:center;">
					<strong>Tastatur-Steuerung</strong>
				</div>
				<ul style="margin:8px 0 0 16px;padding:0;color:#333;line-height:1.4;">
					<li><strong>R</strong>: t-SNE neustarten</li>
					<li><strong>T</strong>: Eine Iterationen ausführen</li>
					<li><strong>Shift+T</strong>: 10 Iterationen ausführen</li>
					<li><strong>K</strong>: Ergebnisse herunterladen</li>
					<li><strong>W / A / S / D</strong>: Kamera verschieben (horizontal)</li>
					<li><strong>Space</strong>: Kamera hoch/runter</li>
					<li><strong>X / Y / Z</strong>: Um Achsen drehen</li>
					<li><strong>B</strong>: Zoom (In-/Auszoomen)</li>
					<li><strong>G</strong>: Achsen an/aus</li>
					<li><strong>Click</strong>: Datenpunkt selektieren</li>
					<li><strong>Esc</strong>: Auswahl löschen</li>
				</ul>
			</div>
		</section>

		<section id="doc">
			<h2>Dokumentation</h2>

			Initial angezeigtes Ergebnis wurde mit folgenden Parametern auf Basis des Quelldatensatzes generiert:
			<ul>
				<li>Lernrate (epsilon): 8</li>
				<li>Perplexity: 10</li>
				<li>Dimensionen: 3</li>
				<li>Iterationsschritte: 650</li>
			</ul>

			<h3>Parameterauswahl</h3>
			<p>
				Diese Einstellungen wurden gewählt, da sich hier innerhalb der drei Klassen weitere Sub-Cluster
				abbilden,
				die untereinander Ähnlichkeiten zu haben scheinen. Bei größeren Werten für Perplexity (p > 15) tendiert
				der t-SNE-Algorithmus dazu, die Daten
				zunehmend eher in 2-Dimensionen abzubilden und Abgrenzungen zwischen den Klassen sowie innerhalb der
				Klassen
				sind weniger deutlich. Zudem hat es dein Eindruck, dass das "Area"-Feature bei höheren Perplexity-Werten
				eine zu starke Gewichtung erfährt, was Ursache für die eher 2D-artige Verteilung der Punkte sein könnte.
			</p>
		</section>
	</main>
</body>

</html>